# ECサイトシステム 基本設計書

| ドキュメントバージョン | 1.0 |
|------------------------|-----|
| 作成日                 | 2025年7月1日 |
| 作成チーム             | チームjobs |
| 承認者                 | 平本さん |
| 更新履歴               | 2025/07/01: Ver.1.0 初版作成 |

---

## 1. はじめに

### 1.1. 本書の目的

本書は、〇〇社が構築する「ECサイトシステム」の基本設計内容を定義するものである。  
要件定義書に基づき、システム構成、主要機能、画面設計、データ構造、操作フロー、非機能対策の設計方針を定め、後続工程（詳細設計・開発・テスト等）における設計指針とすることを目的とする。

### 1.2. プロジェクト概要

本プロジェクトは、〇〇社が提供するこだわりの雑貨（文房具・キッチン用品など）を、より多くの顧客に届けるためのオンライン販売チャネルの確立を目的とするものである。  
従来はSNSによる情報発信に限定され、注文は手作業対応で非効率であったが、ECサイトを構築することで、**販路拡大**・**業務効率化**・**商品訴求力の強化**を図る。

### 1.3. 前提知識
 
本書を読むにあたり、以下の知識を有していることを前提とする。
 
- 本プロジェクトの要件定義書の内容
- Webアプリケーション開発の基本的な知識 (HTTP, HTML, CSS, JavaScript)
- REST API の基本的な概念
- Java および Spring Boot フレームワークの基本的な知識
- リレーショナルデータベースの基本的な知識

---

## 2. システム概要

### 2.1. システムの目的

- オンライン販売チャネルの確立
- 商品魅力の訴求
- 顧客利便性の向上
- 業務効率化

＊詳細は、要件定義書参照

### 2.2. 対象ユーザー

| 区分   | 役割 | 利用内容 |
|--------|------|-----------|
| 顧客   | 商品購入者 | 商品閲覧、カート操作、注文手続き |
| 管理者 | 〇〇社担当者 | 商品管理、注文確認、発送準備など |

### 2.3. システム構成図

<div class="mermaid">
graph LR
    顧客端末[顧客PC/スマホ<br>（Chrome/Safariなど）] -- HTTPS --> ECサーバ[ECサイト Webサーバ]
    管理端末[管理者PC<br>（社内担当者）] -- HTTPS --> ECサーバ
    ECサーバ --> DB[(商品情報DB・注文DB)]
    ECサーバ --> ストレージ[(商品画像等ファイルストレージ)]
    ECサーバ --> メール[(メール通知サーバ)]
    管理端末 --> 認証システム[(Active Directory)] --> ECサーバ
 
    style 顧客端末 fill:#fff8dc,stroke:#333
    style 管理端末 fill:#fff8dc,stroke:#333
    style ECサーバ fill:#cdeeff,stroke:#333,stroke-width:2px
    style DB fill:#e0ffe0,stroke:#333
    style ストレージ fill:#f9f,stroke:#333
    style メール fill:#ffe599,stroke:#333
</div>

### 2.4. 外部インターフェース概要

- **Active Directory**: ユーザー認証のために連携を行う場合がある。（オプション）

- **メール送信機能（SMTP連携）**：注文完了時に、顧客へ自動で確認メールを送信する

## 3. 機能設計

### 3.1. 機能一覧

#### 顧客向け機能

- 商品一覧表示
- 商品詳細表示
- カート操作（追加・編集・削除）
- 注文情報入力
- 注文確定（完了画面／メール通知）

#### 管理者向け機能

- 商品登録・編集・削除
- 注文一覧・詳細確認・ステータス管理
- 簡易在庫確認
- データ連携機能
    - CSVファイルによる備品情報一括登録機能
    - (オプション) 在庫不足通知メール送信機能

### 3.2. 機能構成図

<div class="mermaid">
graph TD

    A[ECサイトシステム] --> B(顧客向け機能)

    A --> C(管理者向け機能)
 
    subgraph B[顧客向け機能]

        B1[商品一覧表示]

        B2[商品詳細表示]

        B3[カート操作]

        B4[注文入力・確定]

    end
 
    subgraph C[管理者向け機能]

        C1[商品登録・編集・削除]

        C2[注文一覧・詳細確認]

        C3[簡易在庫確認]

    end
 
    style A fill:#f9f,stroke:#333,stroke-width:2px
</div>


### 3.3. 業務フロー

#### 顧客購入フロー（概要）

   
  


<div class="mermaid">
sequenceDiagram
管理者->>ECサイトシステム: 管理画面へログイン
ECサイトシステム-->>管理者: 管理メニュー表示

管理者->>ECサイトシステム: 注文管理を選択
ECサイトシステム->>データベース: 注文一覧情報取得
データベース-->>ECサイトシステム: 注文一覧情報返却
ECサイトシステム-->>管理者: 注文一覧画面表示

管理者->>ECサイトシステム: 特定の注文を選択 (詳細表示)
ECサイトシステム->>データベース: 注文詳細情報取得
データベース-->>ECサイトシステム: 注文詳細情報返却
ECサイトシステム-->>管理者: 注文詳細画面表示

管理者->>ECサイトシステム: 注文ステータスを更新 (例: 「注文受付」→「発送準備中」)
ECサイトシステム->>データベース: 注文ステータスを更新
データベース-->>ECサイトシステム: 更新完了
ECサイトシステム-->>管理者: 更新完了メッセージ表示
管理者->>管理者: (システム外) 商品梱包・発送手配
管理者->>ECサイトシステム: 注文ステータスを「発送済み」に更新
ECサイトシステム->>データベース: 注文ステータスを更新
データベース-->>ECサイトシステム: 更新完了
ECサイトシステム-->>管理者: 更新完了メッセージ表示
</div>


#### 管理者業務フロー（概要）


<div class="mermaid">
sequenceDiagram
    participant 管理者
    participant ECサイトシステム
    participant データベース

    管理者->>ECサイトシステム: 管理画面へログイン
    ECサイトシステム-->>管理者: 管理メニュー表示

    管理者->>ECサイトシステム: 商品管理を選択
    ECサイトシステム->>データベース: 商品一覧情報取得
    データベース-->>ECサイトシステム: 商品一覧情報返却
    ECサイトシステム-->>管理者: 商品管理一覧画面表示

    管理者->>ECサイトシステム: 商品の新規登録または編集を選択
    ECサイトシステム-->>管理者: 商品登録・編集画面表示

    管理者->>ECサイトシステム: 商品情報（商品名、価格、**在庫数**など）を入力/変更し、保存
    ECサイトシステム->>データベース: 商品テーブル (ITEMS) の情報を更新/登録
    データベース-->>ECサイトシステム: 更新/登録完了
    ECサイトシステム-->>管理者: 更新/登録完了メッセージ表示
    管理者->>管理者: (必要に応じて) サイト上の商品表示を確認
</div>

---

## 4. 画面設計

### 4.1. 画面一覧

#### 顧客側
- トップページ
- ログイン画面
- 会員登録画面
- 商品一覧画面
- 商品詳細画面
- カート画面
- 注文確認画面
- 注文完了画面
- 注文情報入力画面

#### 管理者側
- 管理ログイン画面	
- 商品管理画面	
- 商品登録／編集画面	
- 注文管理画面	
- 注文詳細画面

### 4.2. 画面遷移図
<<<<<<< HEAD

## 顧客側 画面遷移図
=======
#### 顧客側
トップページ --ログイン --> ログイン画面
>>>>>>> a590f4b0cc97d27150f808319a87c523c95bcdb0

<div class="mermaid">
graph TD
    A[トップページ] -->|ログイン| B[ログイン画面]
    A -->|商品検索| C[商品一覧画面]
    A -->|カート選択| D[カート画面]
    B -->|会員登録| A
    C -->|商品選択| E[商品詳細画面]
    E -->|カート選択| D
    D -->|注文手続き| F[注文情報入力画面]
    F -->|注文確認| G[注文確認画面]
    G -->|注文確定| H[注文完了画面]
    H -->|ホームに戻る| A
</div>

#### 管理者側
管理ログイン画面 --ログイン --> 商品管理画面

商品管理画面 --商品追加・編集 --> 商品登録／編集画面

商品管理画面 --注文管理選択 --> 注文管理画面

注文管理画面 --注文選択 --> 注文詳細画面





### 4.3. UI/UX基本方針

- **シンプルさ**:白を基調とした清潔感のあるデザイン
- **レスポンシブ**:ユーザーが使用するデバイス（PC、タブレット、スマートフォンなど）の画面サイズに応じて、ウェブサイトのレイアウトやデザインが自動的に最適化
- 少ない手数で注文完了

### 4.4. ワイヤーフレーム（例）

#### 4.4.1. 商品一覧画面（GC0201）
+----------------------------------------------------------+
| ヘッダー（ロゴ） | [ カテゴリ選択 ▼ ]  [ カート 🛒 ]       |
+----------------------------------------------------------+
| 【カテゴリ名】                                          |
| -------------------------------------------------------- |
| [商品画像]  商品名         価格（税込） [詳細を見る]     |
| [商品画像]  商品名         価格（税込） [詳細を見る]     |
| ...                                                      |
+----------------------------------------------------------+
| フッター（会社情報・プライバシーポリシー等）             |
+----------------------------------------------------------+


#### 4.4.2. 注文入力画面（GC0401）
+----------------------------------------------------------+
| ヘッダー（ロゴ）                                         |
+----------------------------------------------------------+
| ■ ご注文情報入力                                        |
| 氏名： [                   ]                             |
| 住所： [                   ]                             |
| 電話番号： [              ]                              |
| メールアドレス： [         ]                             |
| -------------------------------------------------------- |
| [注文を確定する]   [カートに戻る]                        |
+----------------------------------------------------------+




### 4.5. 画面項目定義（例）

**注文情報入力画面**

| 項目名     | 型       | 備考                   |
|------------|----------|------------------------|
| 氏名       | テキスト | 必須、最大50文字       |
| 住所       | テキスト | 必須、最大100文字      |
| 電話番号   | テキスト | ハイフン可、15文字まで |
| メールアドレス | テキスト | メール形式            |

---

## 5. データ設計

### 5.1. ER図
<div class="mermaid">
erDiagram
    CUSTOMER ||--o{ ORDER : places
    ORDER ||--|{ ORDER_ITEM : contains
    PRODUCT }o--|| CATEGORY : categorized
    ADMIN_USER }o--|| ROLE : assigned
    ADMIN_USER ||--o{ PRODUCT : manages
    ORDER }o--|| ORDER_STATUS : has
 
    CUSTOMER {
        string customer_id PK
        string name
        string email
        string address
        string phone
        datetime created_at
    }
 
    PRODUCT {
        string product_id PK
        string name
        string description
        int price
        string material
        string image_path
        string category_id FK
        datetime created_at
        datetime updated_at
    }
 
    CATEGORY {
        string category_id PK
        string name
    }
 
    ORDER {
        string order_id PK
        string customer_id FK
        string status_id FK
        datetime order_date
    }
 
    ORDER_ITEM {
        string order_id FK
        string product_id FK
        int quantity
        int unit_price
    }
 
    ADMIN_USER {
        string admin_id PK
        string name
        string email
        string password_hash
        string role_id FK
    }
 
    ROLE {
        string role_id PK
        string role_name
    }
 
    ORDER_STATUS {
        string status_id PK
        string status_name
    }
</div>

### 5.2. テーブル定義（抜粋）

- `CUSTOMER`: 顧客情報
- `PRODUCT`: 商品情報
- `CATEGORY`: 商品カテゴリ
- `ORDER`: 注文
- `ORDER_ITEM`: 注文明細
- `ADMIN_USER`: 管理者
- `ROLE`: ロール
- `ORDER_STATUS`: 注文ステータス

---

## 6. 非機能要件 対応方針

- 通信：HTTPS必須
- セキュリティ：SQLインジェクション／XSS対策
- 性能：主要画面は2秒以内応答
- 可用性：24時間365日稼働
- 拡張性：将来機能（レビュー、決済）に対応できる構成

---

## 7. 運用・保守設計

- ログ出力：アクセス／操作ログ
- 監視：死活、エラー、サーバリソース
- バックアップ：日次・週次・月次で取得、復元検証あり

---

## 8. 制約事項・前提条件

- Chrome／Edge／Safari最新版のみ公式サポート
- 初期リリースでクレカ決済・会員機能・レビュー等は対象外
- 管理者向け操作マニュアルを用意
- 公開予定：2025年6月〜7月
- 予算：XXX万円

---

## 9. 用語集・参考情報

| 用語 | 説明 |
|------|------|
| ECサイト | オンライン販売機能を持つWebサイト |
| カート機能 | 一時的に商品を保持し購入する仕組み |
| SSL/TLS | 通信暗号化プロトコル |
| XSS | クロスサイトスクリプティング攻撃 |
| SQLインジェクション | 不正SQL命令による攻撃 |

---

## 10. 承認欄

| 承認者氏名   | 所属・役職                   | 日付           | 印 |
|--------------|------------------------------|----------------|----|
| 〇〇 〇〇（甲） | 株式会社〇〇 事業企画部 部長 | 2025年MM月DD日 |    |
| △△ △△（乙） | 開発会社 プロジェクトマネージャー | 2025年MM月DD日 |    |
| □□ □□（乙） | 開発会社 システムエンジニア     | 2025年MM月DD日 |    |
